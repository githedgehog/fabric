---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  name: agents.agent.githedgehog.com
spec:
  group: agent.githedgehog.com
  names:
    categories:
    - hedgehog
    - fabric
    kind: Agent
    listKind: AgentList
    plural: agents
    shortNames:
    - ag
    singular: agent
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.role
      name: Role
      type: string
    - jsonPath: .spec.description
      name: Descr
      type: string
    - jsonPath: .status.state.nos.hwskuVersion
      name: HWSKU
      priority: 1
      type: string
    - jsonPath: .status.state.nos.asicVersion
      name: ASIC
      priority: 1
      type: string
    - jsonPath: .status.lastHeartbeat
      name: Heartbeat
      priority: 1
      type: date
    - jsonPath: .status.lastAppliedTime
      name: Applied
      type: date
    - jsonPath: .status.lastAppliedGen
      name: AppliedG
      type: string
    - jsonPath: .metadata.generation
      name: CurrentG
      type: string
    - jsonPath: .status.version
      name: Version
      type: string
    - jsonPath: .status.state.nos.softwareVersion
      name: Software
      priority: 1
      type: string
    - jsonPath: .status.lastAttemptTime
      name: Attempt
      priority: 2
      type: date
    - jsonPath: .status.lastAttemptGen
      name: AttemptG
      priority: 2
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      priority: 10
      type: date
    name: v1alpha2
    schema:
      openAPIV3Schema:
        description: |-
          Agent is an internal API object used by the controller to pass all relevant information to the agent running on a
          specific switch in order to fully configure it and manage its lifecycle. It is not intended to be used directly by
          users. Spec of the object isn't user-editable, it is managed by the controller. Status of the object is updated by
          the agent and is used by the controller to track the state of the agent and the switch it is running on. Name of the
          Agent object is the same as the name of the switch it is running on and it's created in the same namespace as the
          Switch object.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: Spec is the desired state of the Agent
            properties:
              attachedVPCs:
                additionalProperties:
                  type: boolean
                type: object
              catalog:
                description: CatalogSpec defines the desired state of Catalog
                properties:
                  connectionIDs:
                    additionalProperties:
                      format: int32
                      type: integer
                    description: ConnectionSystemIDs stores connection name -> ID,
                      globally unique for the fabric
                    type: object
                  externalIDs:
                    additionalProperties:
                      type: integer
                    description: ExternalIDs stores external name -> ID, unique per
                      switch
                    type: object
                  irbVLANs:
                    additionalProperties:
                      type: integer
                    description: IRBVLANs stores VPC name -> IRB VLAN ID, unique per
                      redundancy group (or switch)
                    type: object
                  loopbackWorkaroundLinks:
                    additionalProperties:
                      type: string
                    description: LoopbackWorkaroundLinks stores loopback workaround
                      "request" name (vpc@<vpc-peering> or ext@<external-peering>)
                      -> loopback link name (<port1--port2>), unique per switch
                    type: object
                  loopbackWorkaroundVLANs:
                    additionalProperties:
                      type: integer
                    description: LoopbackWorkaroundVLANs stores loopback workaround
                      "request" -> VLAN ID, unique per switch
                    type: object
                  portChannelIDs:
                    additionalProperties:
                      type: integer
                    description: PortChannelIDs stores Connection name -> PortChannel
                      ID, unique per redundancy group (or switch)
                    type: object
                  subnetIDs:
                    additionalProperties:
                      format: int32
                      type: integer
                    description: SubnetIDs stores subnet -> ID, unique per switch
                    type: object
                  vpcSubnetVNIs:
                    additionalProperties:
                      additionalProperties:
                        format: int32
                        type: integer
                      type: object
                    description: VPCSubnetVNIs stores VPC name -> subnet name -> VPC
                      Subnet VNI, globally unique for the fabric
                    type: object
                  vpcVNIs:
                    additionalProperties:
                      format: int32
                      type: integer
                    description: VPCVNIs stores VPC name -> VPC VNI, globally unique
                      for the fabric
                    type: object
                type: object
              config:
                properties:
                  baseVPCCommunity:
                    type: string
                  collapsedCore:
                    type: object
                  controlVIP:
                    type: string
                  eslagESIPrefix:
                    type: string
                  eslagMACBase:
                    type: string
                  fabricMTU:
                    type: integer
                  serverFacingMTUOffset:
                    type: integer
                  spineLeaf:
                    type: object
                  vpcLoopbackSubnet:
                    type: string
                  vpcPeeringDisabled:
                    type: boolean
                type: object
              configuredVPCSubnets:
                additionalProperties:
                  type: boolean
                type: object
              connections:
                additionalProperties:
                  description: ConnectionSpec defines the desired state of Connection
                  properties:
                    bundled:
                      description: Bundled defines the bundled connection (port channel,
                        single server to a single switch with multiple links)
                      properties:
                        links:
                          description: Links is the list of server-to-switch links
                          items:
                            description: ServerToSwitchLink defines the server-to-switch
                              link
                            properties:
                              server:
                                description: Server is the server side of the connection
                                properties:
                                  port:
                                    description: |-
                                      Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                      SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                    type: string
                                type: object
                              switch:
                                description: Switch is the switch side of the connection
                                properties:
                                  port:
                                    description: |-
                                      Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                      SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                    type: string
                                type: object
                            type: object
                          type: array
                        mtu:
                          description: MTU is the MTU to be configured on the switch
                            port or port channel
                          type: integer
                      type: object
                    eslag:
                      description: ESLAG defines the ESLAG connection (port channel,
                        single server to 2-4 switches with multiple links)
                      properties:
                        fallback:
                          description: Fallback is the optional flag that used to
                            indicate one of the links in LACP port channel to be used
                            as a fallback link
                          type: boolean
                        links:
                          description: Links is the list of server-to-switch links
                          items:
                            description: ServerToSwitchLink defines the server-to-switch
                              link
                            properties:
                              server:
                                description: Server is the server side of the connection
                                properties:
                                  port:
                                    description: |-
                                      Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                      SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                    type: string
                                type: object
                              switch:
                                description: Switch is the switch side of the connection
                                properties:
                                  port:
                                    description: |-
                                      Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                      SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                    type: string
                                type: object
                            type: object
                          minItems: 2
                          type: array
                        mtu:
                          description: MTU is the MTU to be configured on the switch
                            port or port channel
                          type: integer
                      type: object
                    external:
                      description: External defines the external connection (single
                        switch to a single external device with a single link)
                      properties:
                        link:
                          description: Link is the external connection link
                          properties:
                            switch:
                              description: BasePortName defines the full name of the
                                switch port
                              properties:
                                port:
                                  description: |-
                                    Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                    SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                  type: string
                              type: object
                          type: object
                      type: object
                    fabric:
                      description: Fabric defines the fabric connection (single spine
                        to a single leaf with at least one link)
                      properties:
                        links:
                          description: Links is the list of spine-to-leaf links
                          items:
                            description: FabricLink defines the fabric connection
                              link
                            properties:
                              leaf:
                                description: Leaf is the leaf side of the fabric link
                                properties:
                                  ip:
                                    description: IP is the IP address of the switch
                                      side of the fabric link (switch port configuration)
                                    pattern: ^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}/([1-2]?[0-9]|3[0-2])$
                                    type: string
                                  port:
                                    description: |-
                                      Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                      SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                    type: string
                                type: object
                              spine:
                                description: Spine is the spine side of the fabric
                                  link
                                properties:
                                  ip:
                                    description: IP is the IP address of the switch
                                      side of the fabric link (switch port configuration)
                                    pattern: ^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}/([1-2]?[0-9]|3[0-2])$
                                    type: string
                                  port:
                                    description: |-
                                      Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                      SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                    type: string
                                type: object
                            type: object
                          minItems: 1
                          type: array
                      type: object
                    management:
                      description: Management defines the management connection (single
                        control node/server to a single switch with a single link)
                      properties:
                        link:
                          description: ConnMgmtLink defines the management connection
                            link
                          properties:
                            server:
                              description: Server is the server side of the management
                                link
                              properties:
                                ip:
                                  description: IP is the IP address of the server
                                    side of the management link (control node port
                                    configuration)
                                  pattern: ^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}/([1-2]?[0-9]|3[0-2])$
                                  type: string
                                mac:
                                  description: |-
                                    MAC is an optional MAC address of the control node port for the management link, if specified will be used to
                                    create a "virtual" link with the connection names on the control node
                                  type: string
                                port:
                                  description: |-
                                    Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                    SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                  type: string
                              type: object
                            switch:
                              description: Switch is the switch side of the management
                                link
                              properties:
                                ip:
                                  description: IP is the IP address of the switch
                                    side of the management link (switch port configuration)
                                  pattern: ^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}/([1-2]?[0-9]|3[0-2])$
                                  type: string
                                oniePortName:
                                  description: ONIEPortName is an optional ONIE port
                                    name of the switch side of the management link
                                    that's only used by the IPv6 Link Local discovery
                                  type: string
                                port:
                                  description: |-
                                    Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                    SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                  type: string
                              type: object
                          type: object
                      type: object
                    mclag:
                      description: MCLAG defines the MCLAG connection (port channel,
                        single server to pair of switches with multiple links)
                      properties:
                        fallback:
                          description: Fallback is the optional flag that used to
                            indicate one of the links in LACP port channel to be used
                            as a fallback link
                          type: boolean
                        links:
                          description: Links is the list of server-to-switch links
                          items:
                            description: ServerToSwitchLink defines the server-to-switch
                              link
                            properties:
                              server:
                                description: Server is the server side of the connection
                                properties:
                                  port:
                                    description: |-
                                      Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                      SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                    type: string
                                type: object
                              switch:
                                description: Switch is the switch side of the connection
                                properties:
                                  port:
                                    description: |-
                                      Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                      SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                    type: string
                                type: object
                            type: object
                          minItems: 2
                          type: array
                        mtu:
                          description: MTU is the MTU to be configured on the switch
                            port or port channel
                          type: integer
                      type: object
                    mclagDomain:
                      description: MCLAGDomain defines the MCLAG domain connection
                        which makes two switches into a single logical switch for
                        server multi-homing
                      properties:
                        peerLinks:
                          description: PeerLinks is the list of peer links between
                            the switches, used to pass server traffic between switch
                          items:
                            description: SwitchToSwitchLink defines the switch-to-switch
                              link
                            properties:
                              switch1:
                                description: Switch1 is the first switch side of the
                                  connection
                                properties:
                                  port:
                                    description: |-
                                      Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                      SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                    type: string
                                type: object
                              switch2:
                                description: Switch2 is the second switch side of
                                  the connection
                                properties:
                                  port:
                                    description: |-
                                      Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                      SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                    type: string
                                type: object
                            type: object
                          minItems: 1
                          type: array
                        sessionLinks:
                          description: |-
                            SessionLinks is the list of session links between the switches, used only to pass MCLAG control plane and BGP
                            traffic between switches
                          items:
                            description: SwitchToSwitchLink defines the switch-to-switch
                              link
                            properties:
                              switch1:
                                description: Switch1 is the first switch side of the
                                  connection
                                properties:
                                  port:
                                    description: |-
                                      Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                      SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                    type: string
                                type: object
                              switch2:
                                description: Switch2 is the second switch side of
                                  the connection
                                properties:
                                  port:
                                    description: |-
                                      Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                      SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                    type: string
                                type: object
                            type: object
                          minItems: 1
                          type: array
                      type: object
                    staticExternal:
                      description: StaticExternal defines the static external connection
                        (single switch to a single external device with a single link)
                      properties:
                        link:
                          description: Link is the static external connection link
                          properties:
                            switch:
                              description: Switch is the switch side of the static
                                external connection link
                              properties:
                                ip:
                                  description: IP is the IP address of the switch
                                    side of the static external connection link (switch
                                    port configuration)
                                  pattern: ^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}/([1-2]?[0-9]|3[0-2])$
                                  type: string
                                nextHop:
                                  description: NextHop is the next hop IP address
                                    for static routes that will be created for the
                                    subnets
                                  pattern: ^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)\.?\b){4}$
                                  type: string
                                port:
                                  description: |-
                                    Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                    SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                  type: string
                                subnets:
                                  description: Subnets is the list of subnets that
                                    will get static routes using the specified next
                                    hop
                                  items:
                                    type: string
                                  type: array
                                vlan:
                                  description: VLAN is the optional VLAN ID to be
                                    configured on the switch port
                                  type: integer
                              type: object
                          type: object
                        withinVPC:
                          description: WithinVPC is the optional VPC name to provision
                            the static external connection within the VPC VRF instead
                            of default one to make resource available to the specific
                            VPC
                          type: string
                      type: object
                    unbundled:
                      description: Unbundled defines the unbundled connection (no
                        port channel, single server to a single switch with a single
                        link)
                      properties:
                        link:
                          description: Link is the server-to-switch link
                          properties:
                            server:
                              description: Server is the server side of the connection
                              properties:
                                port:
                                  description: |-
                                    Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                    SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                  type: string
                              type: object
                            switch:
                              description: Switch is the switch side of the connection
                              properties:
                                port:
                                  description: |-
                                    Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                    SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                  type: string
                              type: object
                          type: object
                        mtu:
                          description: MTU is the MTU to be configured on the switch
                            port or port channel
                          type: integer
                      type: object
                    vpcLoopback:
                      description: VPCLoopback defines the VPC loopback connection
                        (multiple port pairs on a single switch) for automated workaround
                      properties:
                        links:
                          description: Links is the list of VPC loopback links
                          items:
                            description: SwitchToSwitchLink defines the switch-to-switch
                              link
                            properties:
                              switch1:
                                description: Switch1 is the first switch side of the
                                  connection
                                properties:
                                  port:
                                    description: |-
                                      Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                      SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                    type: string
                                type: object
                              switch2:
                                description: Switch2 is the second switch side of
                                  the connection
                                properties:
                                  port:
                                    description: |-
                                      Port defines the full name of the switch port in the format of "device/port", such as "spine-1/Ethernet1".
                                      SONiC port name is used as a port name and switch name should be same as the name of the Switch object.
                                    type: string
                                type: object
                            type: object
                          minItems: 1
                          type: array
                      type: object
                  type: object
                type: object
              description:
                type: string
              externalAttachments:
                additionalProperties:
                  description: ExternalAttachmentSpec defines the desired state of
                    ExternalAttachment
                  properties:
                    connection:
                      description: Connection is the name of the Connection object
                        this attachment belongs to (essentialy the name of the switch/port)
                      type: string
                    external:
                      description: External is the name of the External object this
                        attachment belongs to
                      type: string
                    neighbor:
                      description: Neighbor is the BGP neighbor configuration for
                        the external attachment
                      properties:
                        asn:
                          description: ASN is the ASN of the BGP neighbor
                          format: int32
                          type: integer
                        ip:
                          description: IP is the IP address of the BGP neighbor to
                            peer with
                          type: string
                      type: object
                    switch:
                      description: Switch is the switch port configuration for the
                        external attachment
                      properties:
                        ip:
                          description: IP is the IP address of the subinterface on
                            a switch port specified in the connection
                          type: string
                        vlan:
                          description: VLAN is the VLAN ID used for the subinterface
                            on a switch port specified in the connection
                          type: integer
                      type: object
                  type: object
                type: object
              externalPeerings:
                additionalProperties:
                  description: ExternalPeeringSpec defines the desired state of ExternalPeering
                  properties:
                    permit:
                      description: Permit defines the peering policy - which VPC and
                        External to peer with and which subnets/prefixes to permit
                      properties:
                        external:
                          description: External is the External-side of the configuration
                            to peer with
                          properties:
                            name:
                              description: Name is the name of the External to peer
                                with
                              type: string
                            prefixes:
                              description: Prefixes is the list of prefixes to permit
                                from the External to the VPC
                              items:
                                description: ExternalPeeringSpecPrefix defines the
                                  prefix to permit from the External to the VPC
                                properties:
                                  prefix:
                                    description: |-
                                      Prefix is the subnet to permit from the External to the VPC, e.g. 0.0.0.0/0 for any route including default route.
                                      It matches any prefix length less than or equal to 32 effectively permitting all prefixes within the specified one.
                                    type: string
                                type: object
                              type: array
                          type: object
                        vpc:
                          description: VPC is the VPC-side of the configuration to
                            peer with
                          properties:
                            name:
                              description: Name is the name of the VPC to peer with
                              type: string
                            subnets:
                              description: Subnets is the list of subnets to advertise
                                from VPC to the External
                              items:
                                type: string
                              type: array
                          type: object
                      type: object
                  type: object
                type: object
              externals:
                additionalProperties:
                  description: |-
                    ExternalSpec describes IPv4 namespace External belongs to and inbound/outbound communities which are used to
                    filter routes from/to the external system.
                  properties:
                    inboundCommunity:
                      description: InboundCommunity is the name of the inbound community
                        to filter routes from the external system
                      type: string
                    ipv4Namespace:
                      description: IPv4Namespace is the name of the IPv4Namespace
                        this External belongs to
                      type: string
                    outboundCommunity:
                      description: OutboundCommunity is the name of the outbound community
                        that all outbound routes will be stamped with
                      type: string
                  type: object
                type: object
              ipv4Namespaces:
                additionalProperties:
                  description: IPv4NamespaceSpec defines the desired state of IPv4Namespace
                  properties:
                    subnets:
                      description: Subnets is the list of subnets to allocate VPC
                        subnets from, couldn't overlap between each other and with
                        Fabric reserved subnets
                      items:
                        type: string
                      maxItems: 20
                      minItems: 1
                      type: array
                  type: object
                type: object
              powerReset:
                type: string
              reboot:
                type: string
              redundancyGroupPeers:
                items:
                  type: string
                type: array
              reinstall:
                type: string
              role:
                description: SwitchRole is the role of the switch, could be spine,
                  server-leaf or border-leaf or mixed-leaf
                enum:
                - spine
                - server-leaf
                - border-leaf
                - mixed-leaf
                - virtual-edge
                type: string
              statusUpdates:
                description: TODO impl
                items:
                  properties:
                    apiVersion:
                      type: string
                    generation:
                      format: int64
                      type: integer
                    kind:
                      type: string
                    name:
                      type: string
                    namespace:
                      type: string
                  type: object
                type: array
              switch:
                description: SwitchSpec defines the desired state of Switch
                properties:
                  asn:
                    description: ASN is the ASN of the switch
                    format: int32
                    type: integer
                  description:
                    description: Description is a description of the switch
                    type: string
                  groups:
                    description: Groups is a list of switch groups the switch belongs
                      to
                    items:
                      type: string
                    type: array
                  ip:
                    description: IP is the IP of the switch that could be used to
                      access it from other switches and control nodes in the Fabric
                    type: string
                  location:
                    description: Location is the location of the switch, it is used
                      to generate the location UUID and location signature
                    properties:
                      aisle:
                        type: string
                      location:
                        type: string
                      rack:
                        type: string
                      row:
                        type: string
                      slot:
                        type: string
                    type: object
                  locationSig:
                    description: LocationSig is the location signature for the switch
                    properties:
                      sig:
                        type: string
                      uuidSig:
                        type: string
                    type: object
                  portBreakouts:
                    additionalProperties:
                      type: string
                    description: 'PortBreakouts is a map of port breakouts, key is
                      the port name, value is the breakout configuration, such as
                      "1/55: 4x25G"'
                    type: object
                  portGroupSpeeds:
                    additionalProperties:
                      type: string
                    description: 'PortGroupSpeeds is a map of port group speeds, key
                      is the port group name, value is the speed, such as ''"2": 10G'''
                    type: object
                  portSpeeds:
                    additionalProperties:
                      type: string
                    description: PortSpeeds is a map of port speeds, key is the port
                      name, value is the speed
                    type: object
                  profile:
                    description: Profile is the profile of the switch, name of the
                      SwitchProfile object to be used for this switch, currently not
                      used by the Fabric
                    type: string
                  protocolIP:
                    description: ProtocolIP is used as BGP Router ID for switch configuration
                    type: string
                  redundancy:
                    description: Redundancy is the switch redundancy configuration
                      including name of the redundancy group switch belongs to and
                      its type, used both for MCLAG and ESLAG connections
                    properties:
                      group:
                        description: Group is the name of the redundancy group switch
                          belongs to
                        type: string
                      type:
                        description: Type is the type of the redundancy group, could
                          be mclag or eslag
                        enum:
                        - mclag
                        - eslag
                        type: string
                    type: object
                  role:
                    description: Role is the role of the switch, could be spine, server-leaf
                      or border-leaf or mixed-leaf
                    enum:
                    - spine
                    - server-leaf
                    - border-leaf
                    - mixed-leaf
                    - virtual-edge
                    type: string
                  vlanNamespaces:
                    description: VLANNamespaces is a list of VLAN namespaces the switch
                      is part of, their VLAN ranges could not overlap
                    items:
                      type: string
                    type: array
                  vtepIP:
                    description: VTEPIP is the VTEP IP of the switch
                    type: string
                type: object
              switches:
                additionalProperties:
                  description: SwitchSpec defines the desired state of Switch
                  properties:
                    asn:
                      description: ASN is the ASN of the switch
                      format: int32
                      type: integer
                    description:
                      description: Description is a description of the switch
                      type: string
                    groups:
                      description: Groups is a list of switch groups the switch belongs
                        to
                      items:
                        type: string
                      type: array
                    ip:
                      description: IP is the IP of the switch that could be used to
                        access it from other switches and control nodes in the Fabric
                      type: string
                    location:
                      description: Location is the location of the switch, it is used
                        to generate the location UUID and location signature
                      properties:
                        aisle:
                          type: string
                        location:
                          type: string
                        rack:
                          type: string
                        row:
                          type: string
                        slot:
                          type: string
                      type: object
                    locationSig:
                      description: LocationSig is the location signature for the switch
                      properties:
                        sig:
                          type: string
                        uuidSig:
                          type: string
                      type: object
                    portBreakouts:
                      additionalProperties:
                        type: string
                      description: 'PortBreakouts is a map of port breakouts, key
                        is the port name, value is the breakout configuration, such
                        as "1/55: 4x25G"'
                      type: object
                    portGroupSpeeds:
                      additionalProperties:
                        type: string
                      description: 'PortGroupSpeeds is a map of port group speeds,
                        key is the port group name, value is the speed, such as ''"2":
                        10G'''
                      type: object
                    portSpeeds:
                      additionalProperties:
                        type: string
                      description: PortSpeeds is a map of port speeds, key is the
                        port name, value is the speed
                      type: object
                    profile:
                      description: Profile is the profile of the switch, name of the
                        SwitchProfile object to be used for this switch, currently
                        not used by the Fabric
                      type: string
                    protocolIP:
                      description: ProtocolIP is used as BGP Router ID for switch
                        configuration
                      type: string
                    redundancy:
                      description: Redundancy is the switch redundancy configuration
                        including name of the redundancy group switch belongs to and
                        its type, used both for MCLAG and ESLAG connections
                      properties:
                        group:
                          description: Group is the name of the redundancy group switch
                            belongs to
                          type: string
                        type:
                          description: Type is the type of the redundancy group, could
                            be mclag or eslag
                          enum:
                          - mclag
                          - eslag
                          type: string
                      type: object
                    role:
                      description: Role is the role of the switch, could be spine,
                        server-leaf or border-leaf or mixed-leaf
                      enum:
                      - spine
                      - server-leaf
                      - border-leaf
                      - mixed-leaf
                      - virtual-edge
                      type: string
                    vlanNamespaces:
                      description: VLANNamespaces is a list of VLAN namespaces the
                        switch is part of, their VLAN ranges could not overlap
                      items:
                        type: string
                      type: array
                    vtepIP:
                      description: VTEPIP is the VTEP IP of the switch
                      type: string
                  type: object
                type: object
              users:
                items:
                  properties:
                    name:
                      type: string
                    password:
                      type: string
                    role:
                      type: string
                    sshKeys:
                      items:
                        type: string
                      type: array
                  type: object
                type: array
              version:
                properties:
                  ca:
                    type: string
                  default:
                    type: string
                  override:
                    type: string
                  repo:
                    type: string
                type: object
              vlanNamespaces:
                additionalProperties:
                  description: VLANNamespaceSpec defines the desired state of VLANNamespace
                  properties:
                    ranges:
                      description: Ranges is a list of VLAN ranges to be used in this
                        namespace, couldn't overlap between each other and with Fabric
                        reserved VLAN ranges
                      items:
                        properties:
                          from:
                            type: integer
                          to:
                            type: integer
                        type: object
                      maxItems: 20
                      minItems: 1
                      type: array
                  type: object
                type: object
              vpcAttachments:
                additionalProperties:
                  description: VPCAttachmentSpec defines the desired state of VPCAttachment
                  properties:
                    connection:
                      description: Connection is the name of the connection to attach
                        to the VPC
                      type: string
                    nativeVLAN:
                      description: NativeVLAN is the flag to indicate if the native
                        VLAN should be used for attaching the VPC subnet
                      type: boolean
                    subnet:
                      description: Subnet is the full name of the VPC subnet to attach
                        to, such as "vpc-1/default"
                      type: string
                  type: object
                type: object
              vpcPeers:
                additionalProperties:
                  description: VPCPeeringSpec defines the desired state of VPCPeering
                  properties:
                    permit:
                      description: Permit defines a list of the peering policies -
                        which VPC subnets will have access to the peer VPC subnets.
                      items:
                        additionalProperties:
                          properties:
                            subnets:
                              description: Subnets is the list of subnets to advertise
                                from current VPC to the peer VPC
                              items:
                                type: string
                              maxItems: 10
                              minItems: 1
                              type: array
                          type: object
                        type: object
                      maxItems: 10
                      minItems: 1
                      type: array
                    remote:
                      type: string
                  type: object
                type: object
              vpcs:
                additionalProperties:
                  description: |-
                    VPCSpec defines the desired state of VPC.
                    At least one subnet is required.
                  properties:
                    defaultIsolated:
                      description: DefaultIsolated sets default bahivour for isolated
                        mode for the subnets (disabled by default)
                      type: boolean
                    defaultRestricted:
                      description: DefaultRestricted sets default bahivour for restricted
                        mode for the subnets (disabled by default)
                      type: boolean
                    ipv4Namespace:
                      description: IPv4Namespace is the name of the IPv4Namespace
                        this VPC belongs to (if not specified, "default" is used)
                      type: string
                    permit:
                      description: |-
                        Permit defines a list of the access policies between the subnets within the VPC - each policy is a list of subnets that have access to each other.
                        It's applied on top of the subnet isolation flag and if subnet isn't isolated it's not required to have it in a permit list while if vpc is marked
                        as isolated it's required to have it in a permit list to have access to other subnets.
                      items:
                        items:
                          type: string
                        type: array
                      type: array
                    subnets:
                      additionalProperties:
                        description: VPCSubnet defines the VPC subnet configuration
                        properties:
                          dhcp:
                            description: DHCP is the on-demand DHCP configuration
                              for the subnet
                            properties:
                              enable:
                                description: Enable enables DHCP server for the subnet
                                type: boolean
                              pxeURL:
                                description: PXEURL (optional) to identify the pxe
                                  server to use to boot hosts connected to this segment
                                  such as http://10.10.10.99/bootfilename or tftp://10.10.10.99/bootfilename,
                                  http query strings are not supported
                                type: string
                              range:
                                description: Range (optional) is the DHCP range for
                                  the subnet if DHCP server is enabled
                                properties:
                                  end:
                                    description: End is the end IP address of the
                                      DHCP range
                                    type: string
                                  start:
                                    description: Start is the start IP address of
                                      the DHCP range
                                    type: string
                                type: object
                              relay:
                                description: Relay is the DHCP relay IP address, if
                                  specified, DHCP server will be disabled
                                type: string
                            type: object
                          isolated:
                            description: Isolated is the flag to enable isolated mode
                              for the subnet which means no access to and from the
                              other subnets within the VPC
                            type: boolean
                          restricted:
                            description: Restricted is the flag to enable restricted
                              mode for the subnet which means no access between hosts
                              within the subnet itself
                            type: boolean
                          subnet:
                            description: Subnet is the subnet CIDR block, such as
                              "10.0.0.0/24", should belong to the IPv4Namespace and
                              be unique within the namespace
                            type: string
                          vlan:
                            description: VLAN is the VLAN ID for the subnet, should
                              belong to the VLANNamespace and be unique within the
                              namespace
                            type: string
                        type: object
                      description: Subnets is the list of VPC subnets to configure
                      type: object
                    vlanNamespace:
                      description: VLANNamespace is the name of the VLANNamespace
                        this VPC belongs to (if not specified, "default" is used)
                      type: string
                  type: object
                type: object
            type: object
          status:
            description: Status is the observed state of the Agent
            properties:
              conditions:
                description: Conditions of the agent, includes readiness marker for
                  use with kubectl wait
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource.\n---\nThis struct is intended for
                    direct use as an array at the field path .status.conditions.  For
                    example,\n\n\n\ttype FooStatus struct{\n\t    // Represents the
                    observations of a foo's current state.\n\t    // Known .status.conditions.type
                    are: \"Available\", \"Progressing\", and \"Degraded\"\n\t    //
                    +patchMergeKey=type\n\t    // +patchStrategy=merge\n\t    // +listType=map\n\t
                    \   // +listMapKey=type\n\t    Conditions []metav1.Condition `json:\"conditions,omitempty\"
                    patchStrategy:\"merge\" patchMergeKey:\"type\" protobuf:\"bytes,1,rep,name=conditions\"`\n\n\n\t
                    \   // other fields\n\t}"
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: |-
                        type of condition in CamelCase or in foo.example.com/CamelCase.
                        ---
                        Many .condition.type values are consistent across resources like Available, but because arbitrary conditions can be
                        useful (see .node.status.conditions), the ability to deconflict is important.
                        The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              installID:
                description: ID of the agent installation, used to track NOS re-installs
                type: string
              lastAppliedGen:
                description: Generation of the last successful configuration application
                format: int64
                type: integer
              lastAppliedTime:
                description: Time of the last successful configuration application
                format: date-time
                type: string
              lastAttemptGen:
                description: Generation of the last attempt to apply configuration
                format: int64
                type: integer
              lastAttemptTime:
                description: Time of the last attempt to apply configuration
                format: date-time
                type: string
              lastHeartbeat:
                description: Time of the last heartbeat from the agent
                format: date-time
                type: string
              runID:
                description: ID of the agent run, used to track NOS reboots
                type: string
              state:
                description: Detailed switch state updated with each heartbeat
                properties:
                  bgpNeighbors:
                    additionalProperties:
                      additionalProperties:
                        properties:
                          connectionsDropped:
                            format: int64
                            type: integer
                          enabled:
                            type: boolean
                          establishedTransitions:
                            format: int64
                            type: integer
                          lastEstablished:
                            format: date-time
                            type: string
                          lastRead:
                            format: date-time
                            type: string
                          lastResetReason:
                            type: string
                          lastResetTime:
                            format: date-time
                            type: string
                          lastWrite:
                            format: date-time
                            type: string
                          localAS:
                            format: int32
                            type: integer
                          messages:
                            properties:
                              received:
                                properties:
                                  capability:
                                    format: int64
                                    type: integer
                                  keepalive:
                                    format: int64
                                    type: integer
                                  notification:
                                    format: int64
                                    type: integer
                                  open:
                                    format: int64
                                    type: integer
                                  routeRefresh:
                                    format: int64
                                    type: integer
                                  update:
                                    format: int64
                                    type: integer
                                type: object
                              sent:
                                properties:
                                  capability:
                                    format: int64
                                    type: integer
                                  keepalive:
                                    format: int64
                                    type: integer
                                  notification:
                                    format: int64
                                    type: integer
                                  open:
                                    format: int64
                                    type: integer
                                  routeRefresh:
                                    format: int64
                                    type: integer
                                  update:
                                    format: int64
                                    type: integer
                                type: object
                            type: object
                          peerAS:
                            format: int32
                            type: integer
                          peerGroup:
                            type: string
                          peerPort:
                            type: integer
                          peerType:
                            type: string
                          prefixes:
                            additionalProperties:
                              properties:
                                received:
                                  format: int32
                                  type: integer
                                receivedPrePolicy:
                                  format: int32
                                  type: integer
                                sent:
                                  format: int32
                                  type: integer
                              type: object
                            type: object
                          remoteRouterID:
                            type: string
                          sessionState:
                            type: string
                          shutdownMessage:
                            type: string
                        type: object
                      type: object
                    description: State of all BGP neighbors (VRF -> neighbor address
                      -> state)
                    type: object
                  breakouts:
                    additionalProperties:
                      properties:
                        members:
                          items:
                            type: string
                          type: array
                        mode:
                          type: string
                        status:
                          type: string
                      type: object
                    description: Breakout ports state (port -> breakout state)
                    type: object
                  interfaces:
                    additionalProperties:
                      properties:
                        adminStatus:
                          type: string
                        counters:
                          properties:
                            inBitsPerSecond:
                              type: number
                            inDiscards:
                              format: int64
                              type: integer
                            inErrors:
                              format: int64
                              type: integer
                            inPktsPerSecond:
                              type: number
                            inUtilization:
                              type: integer
                            lastClear:
                              format: date-time
                              type: string
                            outBitsPerSecond:
                              type: number
                            outDiscards:
                              format: int64
                              type: integer
                            outErrors:
                              format: int64
                              type: integer
                            outPktsPerSecond:
                              type: number
                            outUtilization:
                              type: integer
                          type: object
                        enabled:
                          type: boolean
                        lastChanged:
                          format: date-time
                          type: string
                        lldpNeighbors:
                          items:
                            properties:
                              chassisID:
                                type: string
                              manufacturer:
                                type: string
                              model:
                                type: string
                              portDescription:
                                type: string
                              portID:
                                type: string
                              serialNumber:
                                type: string
                              systemDescription:
                                type: string
                              systemName:
                                type: string
                            type: object
                          type: array
                        mac:
                          type: string
                        operStatus:
                          type: string
                        transceiver:
                          properties:
                            cableClass:
                              type: string
                            cableLength:
                              type: number
                            connectorType:
                              type: string
                            description:
                              type: string
                            formFactor:
                              type: string
                            operStatus:
                              type: string
                            present:
                              type: string
                            serialNumber:
                              type: string
                            temperature:
                              type: number
                            vendor:
                              type: string
                            vendorOUI:
                              type: string
                            vendorPart:
                              type: string
                            vendorRev:
                              type: string
                            voltage:
                              type: number
                          type: object
                      type: object
                    description: Switch interfaces state (incl. physical, management
                      and port channels)
                    type: object
                  nos:
                    description: Information about the switch and NOS
                    properties:
                      asicVersion:
                        description: ASIC name, such as "broadcom" or "vs"
                        type: string
                      buildCommit:
                        description: NOS build commit
                        type: string
                      buildDate:
                        description: NOS build date
                        type: string
                      builtBy:
                        description: NOS build user
                        type: string
                      configDbVersion:
                        description: NOS config DB version, such as "version_4_2_1"
                        type: string
                      distributionVersion:
                        description: Distribution version, such as "Debian 10.13"
                        type: string
                      hardwareVersion:
                        description: Hardware version, such as "X01"
                        type: string
                      hwskuVersion:
                        description: Hwsku version, such as "DellEMC-S5248f-P-25G-DPB"
                        type: string
                      kernelVersion:
                        description: Kernel version, such as "5.10.0-21-amd64"
                        type: string
                      mfgName:
                        description: Manufacturer name, such as "Dell EMC"
                        type: string
                      platformName:
                        description: Platform name, such as "x86_64-dellemc_s5248f_c3538-r0"
                        type: string
                      productDescription:
                        description: NOS product description, such as "Enterprise
                          SONiC Distribution by Broadcom - Enterprise Base package"
                        type: string
                      productVersion:
                        description: NOS product version, empty for Broadcom SONiC
                        type: string
                      serialNumber:
                        description: Switch serial number
                        type: string
                      softwareVersion:
                        description: NOS software version, such as "4.2.0-Enterprise_Base"
                        type: string
                      uptime:
                        description: 'Switch uptime, such as "21:21:27 up 1 day, 23:26,
                          0 users, load average: 1.92, 1.99, 2.00 "'
                        type: string
                    type: object
                  platform:
                    description: State of the switch platform (fans, PSUs, sensors)
                    properties:
                      fans:
                        additionalProperties:
                          properties:
                            direction:
                              type: string
                            presense:
                              type: boolean
                            speed:
                              type: number
                            status:
                              type: boolean
                          type: object
                        type: object
                      psus:
                        additionalProperties:
                          properties:
                            inputCurrent:
                              type: number
                            inputPower:
                              type: number
                            inputVoltage:
                              type: number
                            outputCurrent:
                              type: number
                            outputPower:
                              type: number
                            outputVoltage:
                              type: number
                            presense:
                              type: boolean
                            status:
                              type: boolean
                          type: object
                        type: object
                      temperature:
                        additionalProperties:
                          properties:
                            alarms:
                              type: string
                            criticalHighThreshold:
                              type: number
                            criticalLowThreshold:
                              type: number
                            highThreshold:
                              type: number
                            lowThreshold:
                              type: number
                            temperature:
                              type: number
                          type: object
                        type: object
                    type: object
                type: object
              statusUpdates:
                description: Status updates from the agent
                items:
                  properties:
                    apiVersion:
                      type: string
                    generation:
                      format: int64
                      type: integer
                    kind:
                      type: string
                    name:
                      type: string
                    namespace:
                      type: string
                  type: object
                type: array
              version:
                description: Current running agent version
                type: string
            required:
            - conditions
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
