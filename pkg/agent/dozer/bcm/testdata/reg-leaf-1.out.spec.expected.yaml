acls:
  no-ipns-peering--default:
    description: Prevent VPCs to cross-talk via the external
    entries:
      "1":
        action: DROP
        destinationAddress: 10.0.0.0/16
        sourceAddress: 10.0.0.0/16
      "65535":
        action: ACCEPT
bfdProfiles:
  fabric:
    desiredMinimumTxInterval: 300
    detectionMultiplier: 3
    passiveMode: false
    requiredMinimumReceive: 300
communityLists:
  all-externals:
    members:
    - 65102:1000
  gw-prio-0:
    members:
    - "50001:0"
  gw-prio-1:
    members:
    - "50001:1"
  gw-prio-2:
    members:
    - "50001:2"
  gw-prio-3:
    members:
    - "50001:3"
  gw-prio-4:
    members:
    - "50001:4"
  gw-prio-5:
    members:
    - "50001:5"
  gw-prio-6:
    members:
    - "50001:6"
  gw-prio-7:
    members:
    - "50001:7"
  gw-prio-8:
    members:
    - "50001:8"
  gw-prio-9:
    members:
    - "50001:9"
  no-community:
    members:
    - REGEX:^$
  vpc-peers--vpc-01:
    members:
    - "50000:2"
    - "50000:5"
  vpc-peers--vpc-02:
    members:
    - "50000:2"
    - "50000:5"
dhcpRelays:
  Vlan1001:
    linkSelect: true
    relayAddress:
    - 172.30.0.1
    sourceInterface: Management0
    vrfSelect: true
  Vlan1002:
    linkSelect: true
    relayAddress:
    - 172.30.0.1
    sourceInterface: Management0
    vrfSelect: true
  Vlan1003:
    linkSelect: true
    relayAddress:
    - 172.30.0.1
    sourceInterface: Management0
    vrfSelect: true
  Vlan1004:
    linkSelect: true
    relayAddress:
    - 172.30.0.1
    sourceInterface: Management0
    vrfSelect: true
ecmpRoCEQPN: false
hostname: leaf-01
interfaces:
  Ethernet0:
    autoNegotiate: false
    description: PC251 MCLAG session leaf-02/E1/1
    enabled: true
    portChannel: PortChannel251
    subinterfaces:
      "0": {}
  Ethernet1:
    autoNegotiate: false
    description: PC251 MCLAG session leaf-02/E1/2
    enabled: true
    portChannel: PortChannel251
    subinterfaces:
      "0": {}
  Ethernet2:
    autoNegotiate: false
    description: PC250 MCLAG peer leaf-02/E1/3
    enabled: true
    portChannel: PortChannel250
    subinterfaces:
      "0": {}
  Ethernet3:
    autoNegotiate: false
    description: PC250 MCLAG peer leaf-02/E1/4
    enabled: true
    portChannel: PortChannel250
    subinterfaces:
      "0": {}
  Ethernet4:
    autoNegotiate: false
    description: PC1 MCLAG server-01 server-01--mclag--leaf-01--leaf-02
    enabled: true
    mtu: 9036
    portChannel: PortChannel1
    subinterfaces:
      "0": {}
  Ethernet5:
    autoNegotiate: false
    description: PC2 MCLAG server-02 server-02--mclag--leaf-01--leaf-02
    enabled: true
    mtu: 9036
    portChannel: PortChannel2
    subinterfaces:
      "0": {}
  Ethernet6:
    autoNegotiate: false
    description: Unbundled server-03 server-03--unbundled--leaf-01
    enabled: true
    mtu: 9036
    subinterfaces:
      "0": {}
    trunkVLANs:
    - "1003"
  Ethernet7:
    autoNegotiate: false
    description: Fabric spine-01/E1/1 spine-01--fabric--leaf-01
    enabled: true
    subinterfaces:
      "0":
        ips:
          172.30.128.1:
            prefixLen: 31
  Ethernet8:
    autoNegotiate: false
    description: Fabric spine-01/E1/2 spine-01--fabric--leaf-01
    enabled: true
    subinterfaces:
      "0":
        ips:
          172.30.128.3:
            prefixLen: 31
  Ethernet9:
    autoNegotiate: false
    description: Fabric spine-02/E1/1 spine-02--fabric--leaf-01
    enabled: true
    subinterfaces:
      "0":
        ips:
          172.30.128.23:
            prefixLen: 31
  Ethernet10:
    autoNegotiate: false
    description: Fabric spine-02/E1/2 spine-02--fabric--leaf-01
    enabled: true
    subinterfaces:
      "0":
        ips:
          172.30.128.25:
            prefixLen: 31
  Loopback1:
    description: Protocol loopback
    enabled: true
    subinterfaces:
      "0":
        ips:
          172.30.8.2:
            prefixLen: 32
  Loopback2:
    description: VTEP loopback
    enabled: true
    subinterfaces:
      "0":
        ips:
          172.30.12.0:
            prefixLen: 32
  Management0:
    autoNegotiate: true
    description: Management link
    enabled: true
    subinterfaces:
      "0":
        ips:
          172.30.0.9:
            prefixLen: 21
  PortChannel1:
    description: MCLAG server-01 server-01--mclag--leaf-01--leaf-02
    enabled: true
    mtu: 9036
    subinterfaces:
      "0": {}
    trunkVLANs:
    - "1001"
  PortChannel2:
    description: MCLAG server-02 server-02--mclag--leaf-01--leaf-02
    enabled: true
    mtu: 9036
    subinterfaces:
      "0": {}
    trunkVLANs:
    - "1002"
  PortChannel250:
    description: MCLAG peer leaf-02
    enabled: true
    subinterfaces:
      "0": {}
    trunkVLANs:
    - 2..4094
  PortChannel251:
    description: MCLAG session leaf-02
    enabled: true
    subinterfaces:
      "0":
        ips:
          172.30.95.0:
            prefixLen: 31
  Vlan1001:
    description: VPC vpc-01/subnet-01
    enabled: true
    vlanAnycastGateway:
    - 10.0.1.1/24
  Vlan1002:
    description: VPC vpc-01/subnet-02
    enabled: true
    vlanAnycastGateway:
    - 10.0.2.1/24
  Vlan1003:
    description: VPC vpc-02/subnet-01
    enabled: true
    vlanAnycastGateway:
    - 10.0.3.1/24
  Vlan1004:
    description: VPC vpc-02/subnet-02
    enabled: true
    vlanAnycastGateway:
    - 10.0.4.1/24
  Vlan3000:
    description: VPC vpc-01 IRB
    enabled: true
  Vlan3001:
    description: VPC vpc-02 IRB
    enabled: true
lldp:
  enabled: true
  helloTimer: 5
  systemDescription: Hedgehog Fabric
  systemName: leaf-01
lstGroups:
  spinelink:
    allMclagDownstream: true
    timeout: 5
lstInterfaces:
  Ethernet7:
    groups:
    - spinelink
  Ethernet8:
    groups:
    - spinelink
  Ethernet9:
    groups:
    - spinelink
  Ethernet10:
    groups:
    - spinelink
mclagInterfaces:
  PortChannel1:
    domainID: 100
  PortChannel2:
    domainID: 100
mclags:
  "100":
    peerIP: 172.30.95.1
    peerLink: PortChannel250
    sourceIP: 172.30.95.0
ntp:
  sourceInterface:
  - Management0
ntpServers:
  172.30.0.1:
    prefer: true
portChannelConfigs:
  PortChannel1:
    fallback: false
  PortChannel2:
    fallback: false
prefixLists:
  all-vtep-prefixes:
    prefixes:
      "10":
        action: permit
        prefix:
          le: 32
          prefix: 172.30.12.0/22
  any-prefix:
    prefixes:
      "10":
        action: permit
        prefix:
          le: 32
          prefix: 0.0.0.0/0
  ipns-subnets--default:
    prefixes:
      "1":
        action: permit
        prefix:
          le: 32
          prefix: 10.0.0.0/16
  protocol-loopback-prefix:
    prefixes:
      "10":
        action: permit
        prefix:
          le: 32
          prefix: 172.30.8.2/32
  static-ext-subnets: {}
  vpc-ext-prefixes--vpc-01: {}
  vpc-ext-prefixes--vpc-02: {}
  vpc-loopback-prefix:
    prefixes:
      "10":
        action: permit
        prefix:
          le: 32
          prefix: 172.30.96.0/19
  vpc-not-subnets--vpc-01:
    prefixes:
      "1":
        action: deny
        prefix:
          le: 32
          prefix: 10.0.1.0/24
      "2":
        action: deny
        prefix:
          le: 32
          prefix: 10.0.2.0/24
      "65535":
        action: permit
        prefix:
          le: 32
          prefix: 0.0.0.0/0
  vpc-not-subnets--vpc-02:
    prefixes:
      "1":
        action: deny
        prefix:
          le: 32
          prefix: 10.0.3.0/24
      "2":
        action: deny
        prefix:
          le: 32
          prefix: 10.0.4.0/24
      "65535":
        action: permit
        prefix:
          le: 32
          prefix: 0.0.0.0/0
  vpc-peers--vpc-01:
    prefixes:
      "501":
        action: permit
        prefix:
          le: 32
          prefix: 10.0.3.0/24
      "502":
        action: permit
        prefix:
          le: 32
          prefix: 10.0.4.0/24
  vpc-peers--vpc-02:
    prefixes:
      "201":
        action: permit
        prefix:
          le: 32
          prefix: 10.0.1.0/24
      "202":
        action: permit
        prefix:
          le: 32
          prefix: 10.0.2.0/24
  vpc-static-ext-subnets--vpc-01: {}
  vpc-static-ext-subnets--vpc-02: {}
  vpc-subnets--vpc-01:
    prefixes:
      "1":
        action: permit
        prefix:
          le: 32
          prefix: 10.0.1.0/24
      "2":
        action: permit
        prefix:
          le: 32
          prefix: 10.0.2.0/24
  vpc-subnets--vpc-02:
    prefixes:
      "1":
        action: permit
        prefix:
          le: 32
          prefix: 10.0.3.0/24
      "2":
        action: permit
        prefix:
          le: 32
          prefix: 10.0.4.0/24
routeMaps:
  filter-attached-hosts:
    statements:
      "10":
        conditions:
          attachedHost: true
        result: reject
      "100":
        conditions: {}
        result: accept
  import-vrf--vpc-01:
    statements:
      "1":
        conditions:
          matchNextHopPrefixLists: vpc-loopback-prefix
        result: reject
      "10005":
        conditions:
          matchPrefixLists: vpc-not-subnets--vpc-02
          matchSourceVrf: VrfVvpc-02
        result: reject
      "50000":
        conditions:
          matchCommunityLists: vpc-peers--vpc-01
        result: accept
      "50001":
        conditions:
          matchCommunityLists: no-community
          matchPrefixLists: vpc-peers--vpc-01
        result: accept
      "65535":
        conditions: {}
        result: reject
  import-vrf--vpc-02:
    statements:
      "1":
        conditions:
          matchNextHopPrefixLists: vpc-loopback-prefix
        result: reject
      "10002":
        conditions:
          matchPrefixLists: vpc-not-subnets--vpc-01
          matchSourceVrf: VrfVvpc-01
        result: reject
      "50000":
        conditions:
          matchCommunityLists: vpc-peers--vpc-02
        result: accept
      "50001":
        conditions:
          matchCommunityLists: no-community
          matchPrefixLists: vpc-peers--vpc-02
        result: accept
      "65535":
        conditions: {}
        result: reject
  ipns-subnets--default:
    statements:
      "10":
        conditions:
          matchPrefixLists: ipns-subnets--default
        result: accept
  l2vpn-neighbors:
    statements:
      "1":
        conditions:
          matchCommunityLists: gw-prio-0
        result: accept
        setLocalPreference: 110
      "2":
        conditions:
          matchCommunityLists: gw-prio-1
        result: accept
        setLocalPreference: 109
      "3":
        conditions:
          matchCommunityLists: gw-prio-2
        result: accept
        setLocalPreference: 108
      "4":
        conditions:
          matchCommunityLists: gw-prio-3
        result: accept
        setLocalPreference: 107
      "5":
        conditions:
          matchCommunityLists: gw-prio-4
        result: accept
        setLocalPreference: 106
      "6":
        conditions:
          matchCommunityLists: gw-prio-5
        result: accept
        setLocalPreference: 105
      "7":
        conditions:
          matchCommunityLists: gw-prio-6
        result: accept
        setLocalPreference: 104
      "8":
        conditions:
          matchCommunityLists: gw-prio-7
        result: accept
        setLocalPreference: 103
      "9":
        conditions:
          matchCommunityLists: gw-prio-8
        result: accept
        setLocalPreference: 102
      "10":
        conditions:
          matchCommunityLists: gw-prio-9
        result: accept
        setLocalPreference: 101
      "65525":
        conditions:
          matchCommunityLists: all-externals
        result: accept
        setLocalPreference: 500
      "65535":
        conditions: {}
        result: accept
  loopback-all-vteps:
    statements:
      "10":
        conditions:
          matchPrefixLists: all-vtep-prefixes
        result: accept
      "100":
        conditions:
          matchPrefixLists: static-ext-subnets
        result: accept
  protocol-loopback-only:
    statements:
      "10":
        conditions:
          matchPrefixLists: protocol-loopback-prefix
        result: accept
  vpc-redistribute-connected--vpc-01:
    statements:
      "1":
        conditions:
          matchPrefixLists: vpc-loopback-prefix
        result: reject
      "5":
        conditions:
          matchPrefixLists: vpc-subnets--vpc-01
        result: accept
        setCommunities:
        - "50000:2"
      "6":
        conditions:
          matchPrefixLists: vpc-static-ext-subnets--vpc-01
        result: accept
      "10":
        conditions: {}
        result: reject
  vpc-redistribute-connected--vpc-02:
    statements:
      "1":
        conditions:
          matchPrefixLists: vpc-loopback-prefix
        result: reject
      "5":
        conditions:
          matchPrefixLists: vpc-subnets--vpc-02
        result: accept
        setCommunities:
        - "50000:5"
      "6":
        conditions:
          matchPrefixLists: vpc-static-ext-subnets--vpc-02
        result: accept
      "10":
        conditions: {}
        result: reject
  vpc-redistribute-static--vpc-01:
    statements:
      "1":
        conditions:
          matchPrefixLists: vpc-loopback-prefix
        result: reject
      "5":
        conditions:
          matchPrefixLists: vpc-static-ext-subnets--vpc-01
        result: accept
      "10":
        conditions:
          matchPrefixLists: vpc-ext-prefixes--vpc-01
        result: accept
  vpc-redistribute-static--vpc-02:
    statements:
      "1":
        conditions:
          matchPrefixLists: vpc-loopback-prefix
        result: reject
      "5":
        conditions:
          matchPrefixLists: vpc-static-ext-subnets--vpc-02
        result: accept
      "10":
        conditions:
          matchPrefixLists: vpc-ext-prefixes--vpc-02
        result: accept
suppressVLANNeighs:
  Vlan1001: {}
  Vlan1002: {}
  Vlan1003: {}
  Vlan1004: {}
  Vlan3000: {}
  Vlan3001: {}
users:
  admin:
    authorizedKeys:
    - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIALAU1RChR27OrcAjD6HFoLrBK3oVKJV6ATWYB3OjdSw
    - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIGpF2+9I1Nj4BcN7y6DjzTbq1VcUYIRGyfzId5ZoBEFj
    password: $5$8nAYPGcl4l6G7Av1$Qi4/gnM0yPtGv9kjpMh78NuNSfQWy7vR1rulHpurL36
    role: admin
  op:
    authorizedKeys:
    - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIALAU1RChR27OrcAjD6HFoLrBK3oVKJV6ATWYB3OjdSw
    - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIGpF2+9I1Nj4BcN7y6DjzTbq1VcUYIRGyfzId5ZoBEFj
    password: $5$8nAYPGcl4l6G7Av1$Qi4/gnM0yPtGv9kjpMh78NuNSfQWy7vR1rulHpurL36
    role: operator
vrfVNIMap:
  VrfVvpc-01:
    vni: 200
  VrfVvpc-02:
    vni: 500
vrfs:
  VrfVvpc-01:
    anycastMAC: "00:00:00:11:11:11"
    attachedHosts:
      Vlan1001: {}
      Vlan1002: {}
    bgp:
      as: 65101
      ipv4Unicast:
        enable: true
        importPolicy: import-vrf--vpc-01
        importVRFs:
          VrfVvpc-02: {}
        maxPaths: 16
      l2vpnEvpn:
        advertiseIPv4Unicast: true
        advertiseIPv4UnicastRouteMaps:
        - filter-attached-hosts
        enable: true
      networkImportCheck: true
      routerID: 172.30.8.2
    enabled: true
    evpnMH: {}
    interfaces:
      Vlan1001: {}
      Vlan1002: {}
      Vlan3000: {}
    tableConnections:
      attachedhost: {}
      connected:
        importPolicies:
        - vpc-redistribute-connected--vpc-01
      static:
        importPolicies:
        - vpc-redistribute-static--vpc-01
  VrfVvpc-02:
    anycastMAC: "00:00:00:11:11:11"
    attachedHosts:
      Vlan1003: {}
      Vlan1004: {}
    bgp:
      as: 65101
      ipv4Unicast:
        enable: true
        importPolicy: import-vrf--vpc-02
        importVRFs:
          VrfVvpc-01: {}
        maxPaths: 16
      l2vpnEvpn:
        advertiseIPv4Unicast: true
        advertiseIPv4UnicastRouteMaps:
        - filter-attached-hosts
        enable: true
      networkImportCheck: true
      routerID: 172.30.8.2
    enabled: true
    evpnMH: {}
    interfaces:
      Vlan1003: {}
      Vlan1004: {}
      Vlan3001: {}
    tableConnections:
      attachedhost: {}
      connected:
        importPolicies:
        - vpc-redistribute-connected--vpc-02
      static:
        importPolicies:
        - vpc-redistribute-static--vpc-02
  default:
    anycastMAC: "00:00:00:11:11:11"
    bgp:
      as: 65101
      ipv4Unicast:
        enable: true
        maxPaths: 16
        networks:
          172.30.8.2/32: {}
      l2vpnEvpn:
        advertiseAllVnis: true
        enable: true
      neighbors:
        172.30.8.0:
          description: Fabric spine-01 loopback (spine-link)
          disableConnectedCheck: true
          enabled: true
          ipv4Unicast: true
          ipv4UnicastExportPolicies:
          - loopback-all-vteps
          l2vpnEvpn: true
          l2vpnEvpnAllowOwnAS: true
          l2vpnEvpnImportPolicies:
          - l2vpn-neighbors
          remoteAS: 65100
          updateSource: 172.30.8.2
        172.30.8.1:
          description: Fabric spine-02 loopback (spine-link)
          disableConnectedCheck: true
          enabled: true
          ipv4Unicast: true
          ipv4UnicastExportPolicies:
          - loopback-all-vteps
          l2vpnEvpn: true
          l2vpnEvpnAllowOwnAS: true
          l2vpnEvpnImportPolicies:
          - l2vpn-neighbors
          remoteAS: 65100
          updateSource: 172.30.8.2
        172.30.95.1:
          description: MCLAG session leaf-02
          enabled: true
          ipv4Unicast: true
          peerType: internal
        172.30.128.0:
          bfdProfile: fabric
          description: Fabric spine-01/E1/1 spine-01--fabric--leaf-01
          enabled: true
          ipv4Unicast: true
          ipv4UnicastExportPolicies:
          - protocol-loopback-only
          remoteAS: 65100
        172.30.128.2:
          bfdProfile: fabric
          description: Fabric spine-01/E1/2 spine-01--fabric--leaf-01
          enabled: true
          ipv4Unicast: true
          ipv4UnicastExportPolicies:
          - protocol-loopback-only
          remoteAS: 65100
        172.30.128.22:
          bfdProfile: fabric
          description: Fabric spine-02/E1/1 spine-02--fabric--leaf-01
          enabled: true
          ipv4Unicast: true
          ipv4UnicastExportPolicies:
          - protocol-loopback-only
          remoteAS: 65100
        172.30.128.24:
          bfdProfile: fabric
          description: Fabric spine-02/E1/2 spine-02--fabric--leaf-01
          enabled: true
          ipv4Unicast: true
          ipv4UnicastExportPolicies:
          - protocol-loopback-only
          remoteAS: 65100
      networkImportCheck: true
      routerID: 172.30.8.2
    enabled: true
    evpnMH: {}
    tableConnections:
      connected: {}
      static: {}
vxlanEVPNNVOs:
  nvo1:
    sourceVtep: vtepfabric
vxlanTunnelMap:
  map_200_Vlan3000:
    vlan: 3000
    vni: 200
    vtep: vtepfabric
  map_201_Vlan1001:
    vlan: 1001
    vni: 201
    vtep: vtepfabric
  map_202_Vlan1002:
    vlan: 1002
    vni: 202
    vtep: vtepfabric
  map_500_Vlan3001:
    vlan: 3001
    vni: 500
    vtep: vtepfabric
  map_501_Vlan1003:
    vlan: 1003
    vni: 501
    vtep: vtepfabric
  map_502_Vlan1004:
    vlan: 1004
    vni: 502
    vtep: vtepfabric
vxlanTunnels:
  vtepfabric:
    qosUniform: false
    sourceIP: 172.30.12.0
    sourceInterface: Loopback2
ztp: false
